# telegram_django_bot

Данный бот поможет нам в запоминании рода слов немецкого языка.
Backend мы реализуем с помощью Django Rest Framework и он будет выполнять 2 функции: отдавать случайное слово на немецком языке, с указанием рода слова или отдавать следующее (от предоставленного pk) слово в базе данных.
Задача telegram-bot (рассмотрим во 2й части) будет запросить 10 слов, проверить правильность ответов или запрашивать слова поряд, пока не будет сброшена тренировка или кончатся слова в базе данных.

BackEnd(Django Rest Framework) - REST API - tg bot aiogram  - Telegram Bot API- Telegram - Telegram App(mobile/Desktop)

poetry init

poetry add django

django-admin startproject bot

python3 manage.py startapp base

SuperUser:
ihor
igorrosolovskij2016@gmail.com
Tdshtratata123

poetry add psycpog2

DATABASES = {
   'default': {
       'ENGINE': 'django.db.backends.postgresql',
       'NAME': '',
       'USER': 'postgres',
       'PASSWORD': 'Tdshtratata123',
       'HOST': 'localhost',
       'PORT': '5432',
   }
}

poetry add djangorestframework

INSTALLED_APPS = [
    ...
    'rest_framework',
]

Реалізація моделі і її реєстрація з редагуванням полів. 

Реалізація ендпоінтів(точки url по яким ми можемо звернутися, для того щоб отримати слово з БД з його родом)

Backend(DRF) буде працювати в 2 режимах, віддача випадкового слова з всієї БД і віддача слів по порядку.

Serializers бажано викладати в окремий модуль, але якщо він один, то можна в views.
Serializer - бере об'єкт і перетворює його в якийсь вид(формат) інформації(json), який комфортно передати по мережі(серіалізація), або зберегти на диск.
Десеріалізація - приймаємо дані з мережі або зчитуємо з диску і збираємо з цього об'єкт, об'єкти зберігаються в БД, представлються нам у вигляді Django ORM-об'єктів.

# Folder Bot
Створена для реалізації самого бота на aiogram
local_settings.py - конфігурація з API_KEY бота( не забути добавити цей модуль в .gitignore)

app.py - файл з самим ботом
main.py - файл для запуску бота
__init__.py - файл для позначення папки, як модуля і можливості імпортування. Також проводимо імпорти і включаємо логування

Створюємо модуль(commands.py) команд, в якому будуть розміщуватися хендлери основних команд за допомогою яких ми будемо спілкуватися з ботом(/start,/help,/stop)

messages.py - файл для зберігання повідомлень

random_ten.py - хендлер, обробник одного ж режиму гри, рандомні 10 слів

keyboards.py - файл для створення клавіатури

states.py - файл для інформацію про поточне знаходження на певному стані(start, random_ten, all_words)

До нашого бекенду ми будемо звертатися за допомогою асинхронного http-клієнта, який вже встановленний в aiogram(aiohttp)

data_fetcher.py - у файлі буде реалізація функціоналу get_random()

Щоб стан в якому ми знаходимося зберігався потрібно в app.py, dp = Dispatcher(bot, storage=MemoryStorage()) - місце в якому зберігаємо дані про стан, самий простий спосіб(хоча не надійний). Другий спосіб - Redis

Далі реалізація функції проходження по всім словам(послідовно)